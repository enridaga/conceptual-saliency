<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Survey</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header>
        <h1>Finding Saliency in Data Collections</h1>
        <p>Welcome to our survey! In this survey, you will work with data extracted from the Tate Gallery collection
            open data, in particular subjects of artworks.</p>
        <p>In this task, you will evaluate pairs of clusters. These clusters are composed of one or more subjects and a
            number of artworks. Consider Overview, definitions and the hierarchy on the left to give your grades.</p>
        <p>Dataset overview: <strong>58,800 artworks</strong>, <strong>160 subjects</strong>.</p>
        <div class="definitions">
            <ul>
                <li><strong>SALIENCY:</strong> Saliency refers to the aspect of an element that stands out relative to
                    its neighbors.</li>
                <li><strong>REPRESENTATIVENESS:</strong> Representativeness is the quality of effectively and accurately
                    depicting a certain subject or group of subjects.</li>
                <li><strong>PROMINENCE:</strong> Prominence refers to the state of being important, well-known, or
                    noticeable within a certain context.</li>
            </ul>
        </div>
    </header>
    <main class="main-container">
        <aside class="sidebar">
            <h3>Subjects Hierarchy</h3>
            <ul id="tree-root"></ul>
        </aside>
        <section class="content">
            <div id="user-info">
                <label for="expertise">Are you a domain expert?</label>
                <select id="expertise">
                    <option value="expert">Expert</option>
                    <option value="non-expert">Non-Expert</option>
                </select>
                <label for="first-name">Name:</label>
                <input type="text" id="first-name" required>
                <button id="start-survey">Start Survey</button>
            </div>
            <div id="group-selection" style="display: none;">
                <h2>Select your group</h2>
                <button id="select-group-a">Group A</button>
                <button id="select-group-b">Group B</button>
            </div>
            <div id="survey-group-a" class="survey-group" style="display: none;">
                <div id="group-a-questions" class="question-container"></div>
                <div id="progress-a" class="progress"></div>
            </div>
            <div id="survey-group-b" class="survey-group" style="display: none;">
                <div id="group-b-questions" class="question-container"></div>
                <div id="progress-b" class="progress"></div>
            </div>
            <div id="thank-you" class="thank-you" style="display: none;">
                <h2>Thank you for completing the survey!</h2>
            </div>
        </section>
    </main>
    <script src="script.js"></script>
    <script>
        async function fetchTreeData(url) {
            const response = await fetch(url);
            const data = await response.json();
            return data;
        }

        function createTreeElement(data, depth, maxDepth) {
            const ul = document.createElement('ul');
            const li = document.createElement('li');
            li.textContent = data.name;

            if (data.children && depth < maxDepth) {
                const childrenUl = document.createElement('ul');
                childrenUl.classList.add('hidden');
                data.children.forEach(child => {
                    childrenUl.appendChild(createTreeElement(child, depth + 1, maxDepth));
                });
                li.appendChild(childrenUl);
                li.addEventListener('click', function (e) {
                    e.stopPropagation();
                    childrenUl.classList.toggle('hidden');
                });
            }

            ul.appendChild(li);
            return ul;
        }

        async function renderTree() {
            const treeData = await fetchTreeData('https://raw.githubusercontent.com/mondoboia/conceptual-saliency/main/subjects_tree.json');
            const treeRoot = document.getElementById('tree-root');
            const treeElement = createTreeElement(treeData, 0, 2); // maxDepth is 2
            treeRoot.appendChild(treeElement);
        }

        renderTree();
    </script>
</body>

</html>